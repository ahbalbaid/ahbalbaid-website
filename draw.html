<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Paint App</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="h-screen bg-teal-600 overflow-hidden">
    <!-- Draggable container -->
    <div
      id="container"
      class="absolute bg-gray-200 border-2 border-white shadow-md"
      style="
        width: 800px;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
      "
    >
      <!-- Title Bar (for dragging) -->
      <div
        id="titleBar"
        class="bg-blue-900 text-white px-2 py-1 flex justify-between items-center cursor-move"
      >
        <span>untitled - Paint</span>
        <div class="flex gap-1">
          <button class="w-5 h-5 p-0 min-w-0 text-white hover:bg-blue-700">
            _
          </button>
          <button class="w-5 h-5 p-0 min-w-0 text-white hover:bg-blue-700">
            □
          </button>
          <button class="w-5 h-5 p-0 min-w-0 text-white hover:bg-blue-700">
            ×
          </button>
        </div>
      </div>

      <!-- Menu Bar -->
      <div class="bg-gray-300 px-2 py-1 text-sm">
        <span class="mr-4">File</span>
        <span class="mr-4">Edit</span>
        <span class="mr-4">View</span>
        <span class="mr-4">Image</span>
        <span class="mr-4">Options</span>
        <span>Help</span>
      </div>

      <!-- Main content -->
      <div class="flex">
        <!-- Tools sidebar -->
        <div class="w-8 bg-gray-300 p-0.5 border-r border-gray-400">
          <button
            id="brushTool"
            class="w-7 h-7 p-0 min-w-0 mb-0.5 bg-gray-300 border border-gray-400 shadow-inner"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="w-5 h-5"
            >
              <path d="M18 12l-8-8-6 6c-2 2-2 5 0 7s5 2 7 0l7-7"></path>
              <path d="M17 7l3 3"></path>
            </svg>
          </button>
          <button id="eraserTool" class="w-7 h-7 p-0 min-w-0 mb-0.5">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="w-5 h-5"
            >
              <path d="M20 20H7L3 16C2 15 2 13 3 12L13 2L22 11L20 20Z"></path>
              <path d="M17 17L7 7"></path>
            </svg>
          </button>
        </div>

        <!-- Canvas Area -->
        <div
          class="flex-grow overflow-auto border border-gray-400"
          style="width: 724px; height: 500px"
        >
          <canvas id="canvas" width="2000" height="2000"></canvas>
        </div>
      </div>

      <!-- Color Palette -->
      <div
        id="colorPalette"
        class="flex bg-gray-300 p-1 border-t border-gray-400"
      >
        <!-- Color buttons will be generated by JS -->
      </div>

      <!-- Footer -->
      <div class="bg-gray-300 px-2 py-1 text-sm border-t border-gray-400">
        For Help, click Help Topics on the Help Menu.
      </div>
    </div>

    <script>
      // ------- Drawing Functionality -------
      let isDrawing = false;
      let currentTool = "brush";
      let currentColor = "#000000";

      const canvas = document.getElementById("canvas");
      const ctx = canvas.getContext("2d");

      // Set initial canvas background
      ctx.fillStyle = "#FFFFFF";
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      function startDrawing(e) {
        const rect = canvas.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;
        ctx.beginPath();
        ctx.moveTo(x, y);
        isDrawing = true;
      }

      function draw(e) {
        if (!isDrawing) return;
        const rect = canvas.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;

        ctx.lineTo(x, y);
        if (currentTool === "eraser") {
          ctx.strokeStyle = "#FFFFFF";
          ctx.lineWidth = 20;
        } else {
          ctx.strokeStyle = currentColor;
          ctx.lineWidth = 2;
        }
        ctx.lineCap = "round";
        ctx.stroke();
      }

      function stopDrawing() {
        isDrawing = false;
      }

      canvas.addEventListener("mousedown", startDrawing);
      canvas.addEventListener("mousemove", draw);
      canvas.addEventListener("mouseup", stopDrawing);
      canvas.addEventListener("mouseout", stopDrawing);

      // ------- Tool Selection -------
      const brushToolBtn = document.getElementById("brushTool");
      const eraserToolBtn = document.getElementById("eraserTool");

      brushToolBtn.addEventListener("click", () => {
        currentTool = "brush";
        brushToolBtn.classList.add(
          "bg-gray-300",
          "border",
          "border-gray-400",
          "shadow-inner"
        );
        eraserToolBtn.classList.remove(
          "bg-gray-300",
          "border",
          "border-gray-400",
          "shadow-inner"
        );
      });

      eraserToolBtn.addEventListener("click", () => {
        currentTool = "eraser";
        eraserToolBtn.classList.add(
          "bg-gray-300",
          "border",
          "border-gray-400",
          "shadow-inner"
        );
        brushToolBtn.classList.remove(
          "bg-gray-300",
          "border",
          "border-gray-400",
          "shadow-inner"
        );
      });

      // ------- Color Palette -------
      const colors = [
        "#000000",
        "#808080",
        "#800000",
        "#808000",
        "#008000",
        "#008080",
        "#000080",
        "#800080",
        "#808040",
        "#004040",
        "#0080FF",
        "#004080",
        "#8000FF",
        "#804000",
        "#FFFFFF",
        "#C0C0C0",
        "#FF0000",
        "#FFFF00",
        "#00FF00",
        "#00FFFF",
        "#0000FF",
        "#FF00FF",
        "#FFFF80",
        "#00FF80",
        "#80FFFF",
        "#8080FF",
        "#FF0080",
        "#FF8040",
      ];

      const colorPaletteDiv = document.getElementById("colorPalette");

      colors.forEach((color) => {
        const btn = document.createElement("button");
        btn.className = "w-6 h-6 p-0 min-w-0";
        btn.style.backgroundColor = color;
        btn.addEventListener("click", () => {
          currentColor = color;
          // Remove active style from all color buttons
          document
            .querySelectorAll("#colorPalette button")
            .forEach((button) => {
              button.classList.remove("ring-1", "ring-gray-600");
            });
          // Add active style to the selected button
          btn.classList.add("ring-1", "ring-gray-600");
        });
        // Mark the initial color as active
        if (color === currentColor) {
          btn.classList.add("ring-1", "ring-gray-600");
        }
        colorPaletteDiv.appendChild(btn);
      });

      // ------- Draggable Container -------
      const container = document.getElementById("container");
      const titleBar = document.getElementById("titleBar");
      let dragging = false;
      let offsetX = 0;
      let offsetY = 0;

      titleBar.addEventListener("mousedown", (e) => {
        dragging = true;
        const rect = container.getBoundingClientRect();
        offsetX = e.clientX - rect.left;
        offsetY = e.clientY - rect.top;
      });

      document.addEventListener("mousemove", (e) => {
        if (dragging) {
          container.style.left = e.clientX - offsetX + "px";
          container.style.top = e.clientY - offsetY + "px";
          container.style.transform = "none"; // Disable centering transform while dragging
        }
      });

      document.addEventListener("mouseup", () => {
        dragging = false;
      });
    </script>
  </body>
</html>
